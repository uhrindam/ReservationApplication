@model IEnumerable<ReservationApplication.Areas.User.Models.SchedulerReservations>
@using Kendo.Mvc.UI;

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int i = 0;
}

@if (TempData["Message"] != null)
{
    <div class="alert alert-dismissible alert-danger">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        @TempData["Message"].ToString()
    </div>
}

<link href="https://kendo.cdn.telerik.com/2018.2.516/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
<link href="https://kendo.cdn.telerik.com/2018.2.516/styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
<link href="https://kendo.cdn.telerik.com/2018.2.516/styles/kendo.moonlight.min.css" rel="stylesheet" type="text/css" />
<script src="https://kendo.cdn.telerik.com/2018.2.516/js/jquery.min.js"></script>
<script src="https://kendo.cdn.telerik.com/2018.2.516/js/jszip.min.js"></script>
<script src="https://kendo.cdn.telerik.com/2018.2.516/js/kendo.all.min.js"></script>
<script src="https://kendo.cdn.telerik.com/2018.2.516/js/kendo.aspnetmvc.min.js"></script>
<script src="http://kendo.cdn.telerik.com/2018.2.516/js/cultures/kendo.culture.hu-HU.min.js"></script>

<script src="@Url.Content("~/Scripts/kendo.modernizr.custom.js")"></script>

@(Html.Kendo().Scheduler<ReservationApplication.Areas.User.Models.SchedulerReservations>()
                        .Name("scheduler")
                        .Date(DateTime.Now)
                        .StartTime(new DateTime(2018, 6, 13, 9, 00, 00))
                        .EndTime(new DateTime(2018, 6, 13, 17, 00, 00))
                        .Height(600)
                        .Footer(false)
                        .Timezone("Etc/UTC")
                        .AllDaySlot(false)

                        //.MinorTickCount(5)

                        .Views(views =>
                        {
                            views.WeekView();
                        })


                        .Editable(e =>
                        {
                            e.Move(false);
                            e.Update(false);
                            e.Resize(false);
                            e.Destroy(false);
                            e.TemplateId("editor");
                        })

                        .DataSource(ds => ds
                            .Batch(false)
                            .Model(m =>
                            {
                                m.Id(f => f.TaskID);
                                m.Field(f => f.OwnerID).DefaultValue(1);
                            })
                            .Read(read => read.Action("Read", "BookAnAppointment"))
                            .Create(read => read.Action("Create", "BookAnAppointment"))
                            .Destroy(read => read.Action("Destroy", "BookAnAppointment"))
                            .Update(read => read.Action("Update", "BookAnAppointment")))

                        .BindTo(Model)
)

<script type="text/javascript">
    //set current to the "en-GB" culture script
    kendo.culture("hu-HU");
</script>

<script>
    function selected() {
        var e = document.getElementById("lista");
        var strUser = e.options[e.selectedIndex].text;
    }
</script>

<div id="editor" hidden="hidden" title="Időpont foglalása" type="text/x-kendo-template">
    <div class="k-edit-field" data-container-for="title">
        <h2>Időpont foglalása</h2>
    </div>

    <div class="k-edit-label">
        <label for="CategoryName">Kategória kiválasztása</label>
    </div>
    <div data-container-for="CategoryName" class="k-edit-field">
        <select id="CategoryName" class="catSel" data-bind="value: CategoryName" data-template="" data-role="dropdownlist" data-value-field="value" data-text-field="text">

            @foreach (var item in ViewBag.Categories)
            {
                if (i == 0)
                {
                    <option style="background-color:red" selected="selected" value="@item.CategoryName">@item.CategoryName, @item.Price asd, @item.ProcessLengthInMunites perc</option>
                    i++;
                }
                else
                {
                    <option style="background-color:red" value="@item.CategoryName">@item.CategoryName, @item.Price forint, @item.ProcessLengthInMunites perc</option>

                }
            }
            @i  = 0;
        </select>
    </div>
</div>

<style>
    .catSel {
        width: 350px;
    }
</style>